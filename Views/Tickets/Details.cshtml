@model TitanTracker.Models.Ticket

@using Microsoft.AspNetCore.Identity
@using TitanTracker.Services.Interfaces
@inject IBTFileService BTFileService
@inject IBTProjectService ProjectService
@inject IBTTicketService TicketService
@inject UserManager<BTUser> UserManager

@{
    BTUser bTUser = await UserManager.GetUserAsync(User);
    BTUser projectManager = await ProjectService.GetProjectManagerAsync(Model.ProjectId);
    //BTUser developer = await TicketService.GetTicketDeveloperAsync(Model.Id);
}

<h1>Ticket information</h1>

<div>
    <h4>Ticket Name</h4>
    <hr />
    <div>
        <form asp-action="Create" asp-controller="TicketAttachments" enctype="multipart/form-data" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <input type="hidden" asp-for="@Model.Id" name="TicketId">

            <div class="media-body ml-3">
                <label class="form-label d-block mb-2">Add Attachment</label>
                <label>
                    Description
                    <input asp-for="@Model.Attachments.FirstOrDefault().Description" type="text" class="form-control" />
                </label><br />
                <label class="btn btn-outline-primary btn-sm">
                    <input asp-for="@Model.Attachments.FirstOrDefault().FormFile" type="file" />
                </label>
                <button type="submit" class="btn btn-outline-secondary btn-sm md-btn-flat">Submit</button>
            </div>
        </form>
    </div>

    <div class="col-lg-12 col-xl-6">
        <section class="card">
            <header class="card-header card-header-transparent">
                <div class="card-actions">
                    <a href="#" class="card-action card-action-toggle" data-card-toggle></a>
                    <a href="#" class="card-action card-action-dismiss" data-card-dismiss></a>
                </div>

                <h2 class="card-title">Ticket History</h2>
            </header>
            <div class="card-body">
                <div class="timeline timeline-simple mt-3 mb-3">
                    <div class="tm-body">
                        <div class="tm-title">
                            <h5 class="m-0 pt-2 pb-2 text-dark font-weight-semibold text-uppercase">November 2021</h5>
                        </div>
                        <ol class="tm-items">
                            <li>
                                <div class="tm-box">
                                    <p class="text-muted mb-0">7 months ago.</p>
                                    <p>
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas hendrerit augue at leo viverra, aliquam egestas lectus laoreet. Donec vehicula vestibulum ipsum, tincidunt ultrices elit suscipit ac. Sed eget risus laoreet, varius nibh id, luctus ligula. Nulla facilisi. <span class="text-primary">#awesome</span>
                                    </p>
                                </div>
                            </li>
                            <li>
                                <div class="tm-box">
                                    <p class="text-muted mb-0">7 months ago.</p>
                                    <p>
                                        Checkout! How cool is that! Etiam efficitur, sapien eget vehicula gravida, magna neque volutpat risus, vitae tempus odio arcu ac elit. Aenean porta orci eu mi fermentum varius. Curabitur ac sem at nibh egestas. Curabitur ac sem at nibh egestas.
                                    </p>
                                    <div class="thumbnail-gallery">
                                        <a class="img-thumbnail lightbox" href="img/projects/project-4.jpg" data-plugin-options='{ "type":"image" }'>
                                            <img class="img-fluid" width="215" src="img/projects/project-4.jpg">
                                            <span class="zoom">
                                                <i class="bx bx-search"></i>
                                            </span>
                                        </a>
                                    </div>
                                </div>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>

@*<dl class="row">
            <dt class = "col-sm-2">
                @Html.DisplayNameFor(model => model.Title)
            </dt>
            <dd class = "col-sm-10">
                @Html.DisplayFor(model => model.Title)
            </dd>
            <dt class = "col-sm-2">
                @Html.DisplayNameFor(model => model.Description)
            </dt>
            <dd class = "col-sm-10">
                @Html.DisplayFor(model => model.Description)
            </dd>
            <dt class = "col-sm-2">
                @Html.DisplayNameFor(model => model.Created)
            </dt>
            <dd class = "col-sm-10">
                @Html.DisplayFor(model => model.Created)
            </dd>
            <dt class = "col-sm-2">
                @Html.DisplayNameFor(model => model.Updated)
            </dt>
            <dd class = "col-sm-10">
                @Html.DisplayFor(model => model.Updated)
            </dd>
            <dt class = "col-sm-2">
                @Html.DisplayNameFor(model => model.Archived)
            </dt>
            <dd class = "col-sm-10">
                @Html.DisplayFor(model => model.Archived)
            </dd>
            <dt class = "col-sm-2">
                @Html.DisplayNameFor(model => model.ProjectId)
            </dt>
            <dd class = "col-sm-10">
                @Html.DisplayFor(model => model.ProjectId)
            </dd>
            <dt class = "col-sm-2">
                @Html.DisplayNameFor(model => model.TicketType)
            </dt>
            <dd class = "col-sm-10">
                @Html.DisplayFor(model => model.TicketType.Id)
            </dd>
            <dt class = "col-sm-2">
                @Html.DisplayNameFor(model => model.TicketPriority)
            </dt>
            <dd class = "col-sm-10">
                @Html.DisplayFor(model => model.TicketPriority.Id)
            </dd>
            <dt class = "col-sm-2">
                @Html.DisplayNameFor(model => model.TicketStatus)
            </dt>
            <dd class = "col-sm-10">
                @Html.DisplayFor(model => model.TicketStatus.Id)
            </dd>
            <dt class = "col-sm-2">
                @Html.DisplayNameFor(model => model.OwnerUser)
            </dt>
            <dd class = "col-sm-10">
                @Html.DisplayFor(model => model.OwnerUser.Id)
            </dd>
            <dt class = "col-sm-2">
                @Html.DisplayNameFor(model => model.DeveloperUser)
            </dt>
            <dd class = "col-sm-10">
                @Html.DisplayFor(model => model.DeveloperUser.Id)
            </dd>
        </dl>
    </div>
    <div>
        <a asp-action="Edit" asp-route-id="@Model.Id">Edit</a> |
        <a asp-action="Index">Back to List</a>
    </div>*@